#\---------------
# Functions
#/---------------

# Update this source file with the most recent at github
# Not yet done. Do not use yet.
function :update {

	if [ $# -gt 0 ];
	then
		case "$1" in
			-i | --init-new)
				cd ~
				rm -Rf .bash
				:update -a
			;;
			-a | --create-dir)
				mkdir ~/.bash
				cd ~/.bash
				git init
				:update -p
			;;
			-p | --pull-repo)
				cd ~/.bash
				git remote add bash git@github.com:Defavlt/.bash.git
				git pull bash master
				ln -s ~/.bash/.rc ~/.bashrc
			;;
			-h | --help | *)
				printf "Usage: :update (-i | -a)\n\t-i, --init-new\n\t\tRemoves the already existing ~/.bash-directory, adds a new ~/.bash-directory and inits and pulls the git repo.\n\t-a, --create-dir\n\t\tCreates a new ~/.bash-directory and inits and pulls the git repo.\n\t-p, --pull-repo\n\\tPulls the git repo and creates a symlink to ~/.bashrc.\n"
			;;
		esac
	else
		printf "Wrong argument/s and/or amount of arguments."
		printf "\nUsage: :update -h\n";
	fi

}

function wiki () {
	if [ $# -gt 0 ];
	then
		dig +short txt $1.wp.dg.cx
	else
		printf "\nUsage: wiki SUBJECT\n";
	fi
}

# Remove $2 and mv and link $1 to $2
function pullcarpet() {
	
	if [ $# -eq 2 ];
	then 

		sudo rm $2
		sudo mv $1 $2
		sudo ln -s $2 $1

	fi
}

function search () {
	
	if [ $# -gt 1 ];
	then
		case "$1" in
			-n | --lines)
				if [ $# -eq 3 ];
				then
					sudo awk "$2"' { count++ } END { printf count;printf "\n";}' $3
				else
					search;
				fi
			;;
			*)
				if [ $# -eq 2 ];
				then
					sudo awk -Fs "$1" $2;
				elif [ $# -gt 2 ];
				then
					sudo awk -Fs $1 $2 $3;
				else
					search;
				fi
			;;
		esac
	else
		printf "Usage: [-n] search file\n"
	fi
}

function luser () {

	if [ $# -lt 1 ];
	then
		users --help;
	else
		case "$1" in
			-a | --active)
				luser;
			;;
			-l | --all)
	    		cat /etc/passwd | cut -d: -f1;
			;;
			-r | --real)
				cat /etc/passwd | cut -d: -f5;
			;;
			-h | --help)
				printf "Usage: luser [-a | -l | -r | -h] \n";
			;;
			*)
				luser -h;
			;;
		esac
	fi
}

function x () {
    if [ $# -lt 1 ];
    then
        ./
    else
        ./$1
    fi
}

#\---------------
# Shortcuts
#/---------------

#Required by :clear
EDITOR=/usr/bin/vi

#Navigational
# WTF DUDE
#alias ls='ls -lah --color=always'
alias cls=':clear cls'
alias ww='cls /var/www'

#Other/Misc
alias marcus='sudo chown marcus'
alias lnh='ln --help | head --lines=1'
alias pc='pullcarpet'
alias x='./$1'
alias suspend='sudo pm-suspend'
alias restart='sudo shutdown -r now'
alias shutdown='sudo shutdown -h -P now'

#Loading of .rc-files
alias charc='vi ~/.bashrc'
alias sourc='source ~/.bashrc'

#Settings
export PS1="\[\033[01;33m\]\u@\\h:\[\033[01;34m\]\w\$\[\033[00m\]:; ";
export HISTCONTROL=erasedups

#Shortcuts..
alias 1='fg 1 2&> /dev/null'
alias 2='fg 2 2&> /dev/null'
alias 3='fg 3 2&> /dev/null'
alias 4='fg 4 2&> /dev/null'
alias 5='fg 5 2&> /dev/null'

#Add other scripts
bash_completion=/etc/bash_completion.d/git
scripts=(/etc/bash_completion.d/git ~/src/bash/exports.d/*)

for script in "${scripts[@]}"
do
    if [ -f $script ];
        then source $script;
    fi
done
